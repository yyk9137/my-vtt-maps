(()=>{'use strict';var t={54:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map(function(n){var r='',e=void 0!==n[5];return n[4]&&(r+='@supports ('.concat(n[4],') {')),n[2]&&(r+='@media '.concat(n[2],' {')),e&&(r+='@layer'.concat(n[5].length>0?' '.concat(n[5]):'',' {')),r+=t(n),e&&(r+='}'),n[2]&&(r+='}'),n[4]&&(r+='}'),r}).join('')},n.i=function(t,r,e,A,o){'string'==typeof t&&(t=[[null,t,void 0]]);var i={};if(e)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(i[s]=!0)}for(var d=0;d<t.length;d++){var C=[].concat(t[d]);e&&i[C[0]]||(void 0!==o&&(void 0===C[5]||(C[1]='@layer'.concat(C[5].length>0?' '.concat(C[5]):'',' {').concat(C[1],'}')),C[5]=o),r&&(C[2]?(C[1]='@media '.concat(C[2],' {').concat(C[1],'}'),C[2]=r):C[2]=r),A&&(C[4]?(C[1]='@supports ('.concat(C[4],') {').concat(C[1],'}'),C[4]=A):C[4]=''.concat(A)),n.push(C))}},n}},134:t=>{t.exports=function(t){var n=document.createElement('style');return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},219:t=>{t.exports=function(t){if('undefined'==typeof document)return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(r){!function(t,n,r){var e='';r.supports&&(e+='@supports ('.concat(r.supports,') {')),r.media&&(e+='@media '.concat(r.media,' {'));var A=void 0!==r.layer;A&&(e+='@layer'.concat(r.layer.length>0?' '.concat(r.layer):'',' {')),e+=r.css,A&&(e+='}'),r.media&&(e+='}'),r.supports&&(e+='}');var o=r.sourceMap;o&&'undefined'!=typeof btoa&&(e+='\n/*# sourceMappingURL=data:application/json;base64,'.concat(btoa(unescape(encodeURIComponent(JSON.stringify(o)))),' */')),n.styleTagTransform(e,t,n.options)}(n,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}},234:t=>{var n=[];function r(t){for(var r=-1,e=0;e<n.length;e++)if(n[e].identifier===t){r=e;break}return r}function e(t,e){for(var o={},i=[],a=0;a<t.length;a++){var s=t[a],d=e.base?s[0]+e.base:s[0],C=o[d]||0,l=''.concat(d,' ').concat(C);o[d]=C+1;var c=r(l),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==c)n[c].references++,n[c].updater(p);else{var h=A(p,e);e.byIndex=a,n.splice(a,0,{identifier:l,updater:h,references:1})}i.push(l)}return i}function A(t,n){var r=n.domAPI(n);r.update(t);return function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;r.update(t=n)}else r.remove()}}t.exports=function(t,A){var o=e(t=t||[],A=A||{});return function(t){t=t||[];for(var i=0;i<o.length;i++){var a=r(o[i]);n[a].references--}for(var s=e(t,A),d=0;d<o.length;d++){var C=r(o[d]);0===n[C].references&&(n[C].updater(),n.splice(C,1))}o=s}}},699:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}},714:(t,n,r)=>{t.exports=function(t){var n=r.nc;n&&t.setAttribute('nonce',n)}},733:(t,n,r)=>{r.d(n,{A:()=>a});var e=r(790),A=r.n(e),o=r(54),i=r.n(o)()(A());i.push([t.id,'.vtt-map-button{position:fixed;bottom:20px;right:20px;z-index:9999;display:flex;align-items:center;gap:8px;padding:12px 20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;border-radius:50px;box-shadow:0 4px 15px rgba(102,126,234,.4);font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease}.vtt-map-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,.6)}.vtt-map-button:active{transform:translateY(0)}.vtt-map-button svg{width:24px;height:24px}.vtt-floating-window{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:80vw;height:80vh;max-width:1400px;min-width:400px;min-height:300px;background:#1a1a1a;border:2px solid #667eea;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,.5);z-index:10000;display:flex;flex-direction:column;overflow:hidden}.vtt-floating-window.fullscreen{top:0;left:0;transform:none;width:100vw !important;height:100vh !important;border-radius:0;max-width:none}.vtt-title-bar{padding:12px 20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;justify-content:space-between;align-items:center;cursor:move;-webkit-user-select:none;user-select:none}.vtt-title-bar .vtt-title{display:flex;align-items:center;gap:10px;color:#fff;font-size:18px;font-weight:600}.vtt-title-bar .vtt-title svg{width:20px;height:20px}.vtt-title-bar .vtt-controls{display:flex;gap:8px}.vtt-control-btn{padding:6px 12px;border:none;border-radius:5px;color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.vtt-control-btn:hover{transform:scale(1.05)}.vtt-control-btn:active{transform:scale(0.95)}.vtt-control-btn.vtt-minimize-btn{background:#ff9800}.vtt-control-btn.vtt-minimize-btn:hover{background:#fb8c00}.vtt-control-btn.vtt-fullscreen-btn{background:#2196f3}.vtt-control-btn.vtt-fullscreen-btn:hover{background:#1e88e5}.vtt-control-btn.vtt-close-btn{background:#f44336}.vtt-control-btn.vtt-close-btn:hover{background:#e53935}.vtt-content{flex:1;position:relative;overflow:hidden;background:#0a0a0a}.vtt-content.minimized{display:none}.vtt-loading{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;background:#0a0a0a;color:#fff;z-index:1}.vtt-loading .spinner{width:50px;height:50px;border:4px solid rgba(102,126,234,.3);border-top-color:#667eea;border-radius:50%;animation:spin 1s linear infinite}.vtt-loading p{margin:0;font-size:18px;color:#667eea}.vtt-loading small{font-size:14px;color:#999}.vtt-loading .error-icon{font-size:50px}@keyframes spin{to{transform:rotate(360deg)}}.vtt-iframe{width:100%;height:100%;border:none;background:#fff}.vtt-resize-handle{position:absolute;z-index:10}.vtt-resize-handle.vtt-resize-n{top:0;left:10px;right:10px;height:5px;cursor:n-resize}.vtt-resize-handle.vtt-resize-e{top:10px;right:0;bottom:10px;width:5px;cursor:e-resize}.vtt-resize-handle.vtt-resize-s{bottom:0;left:10px;right:10px;height:5px;cursor:s-resize}.vtt-resize-handle.vtt-resize-w{top:10px;left:0;bottom:10px;width:5px;cursor:w-resize}.vtt-resize-handle.vtt-resize-ne{top:0;right:0;width:10px;height:10px;cursor:ne-resize}.vtt-resize-handle.vtt-resize-se{bottom:0;right:0;width:10px;height:10px;cursor:se-resize}.vtt-resize-handle.vtt-resize-sw{bottom:0;left:0;width:10px;height:10px;cursor:sw-resize}.vtt-resize-handle.vtt-resize-nw{top:0;left:0;width:10px;height:10px;cursor:nw-resize}body.vtt-dragging,body.vtt-resizing{-webkit-user-select:none;user-select:none}body.vtt-dragging *,body.vtt-resizing *{cursor:inherit !important}@media (max-width:768px){.vtt-floating-window{width:95vw;height:90vh}.vtt-map-button{bottom:80px}}','',{version:3,sources:['webpack://./src/VTT地图悬浮窗/index.scss'],names:[],mappings:'AAGA,gBACE,cAAA,CACA,WAAA,CACA,UAAA,CACA,YAAA,CAEA,YAAA,CACA,kBAAA,CACA,OAAA,CAEA,iBAAA,CACA,0DAAA,CACA,UAAA,CACA,WAAA,CACA,kBAAA,CACA,0CAAA,CAEA,cAAA,CACA,eAAA,CACA,cAAA,CAEA,uBAAA,CAEA,sBACE,0BAAA,CACA,0CAAA,CAGF,uBACE,uBAAA,CAGF,oBACE,UAAA,CACA,WAAA,CAKJ,qBACE,cAAA,CACA,OAAA,CACA,QAAA,CACA,8BAAA,CAEA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,eAAA,CACA,gBAAA,CAEA,kBAAA,CACA,wBAAA,CACA,kBAAA,CACA,qCAAA,CAEA,aAAA,CACA,YAAA,CACA,qBAAA,CAEA,eAAA,CAEA,gCACE,KAAA,CACA,MAAA,CACA,cAAA,CACA,sBAAA,CACA,uBAAA,CACA,eAAA,CACA,cAAA,CAKJ,eACE,iBAAA,CACA,0DAAA,CAEA,YAAA,CACA,6BAAA,CACA,kBAAA,CAEA,WAAA,CACA,wBAAA,CAAA,gBAAA,CAEA,0BACE,YAAA,CACA,kBAAA,CACA,QAAA,CAEA,UAAA,CACA,cAAA,CACA,eAAA,CAEA,8BACE,UAAA,CACA,WAAA,CAIJ,6BACE,YAAA,CACA,OAAA,CAKJ,iBACE,gBAAA,CACA,WAAA,CACA,iBAAA,CAEA,UAAA,CACA,cAAA,CACA,eAAA,CAEA,cAAA,CACA,uBAAA,CAEA,uBACE,qBAAA,CAGF,wBACE,qBAAA,CAGF,kCACE,kBAAA,CAEA,wCACE,kBAAA,CAIJ,oCACE,kBAAA,CAEA,0CACE,kBAAA,CAIJ,+BACE,kBAAA,CAEA,qCACE,kBAAA,CAMN,aACE,MAAA,CACA,iBAAA,CACA,eAAA,CACA,kBAAA,CAEA,uBACE,YAAA,CAKJ,aACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CAEA,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,kBAAA,CACA,QAAA,CAEA,kBAAA,CACA,UAAA,CACA,SAAA,CAEA,sBACE,UAAA,CACA,WAAA,CACA,qCAAA,CACA,wBAAA,CACA,iBAAA,CACA,iCAAA,CAGF,eACE,QAAA,CACA,cAAA,CACA,aAAA,CAGF,mBACE,cAAA,CACA,UAAA,CAGF,yBACE,cAAA,CAIJ,gBACE,GACE,wBAAA,CAAA,CAKJ,YACE,UAAA,CACA,WAAA,CACA,WAAA,CACA,eAAA,CAIF,mBACE,iBAAA,CACA,UAAA,CAEA,gCACE,KAAA,CACA,SAAA,CACA,UAAA,CACA,UAAA,CACA,eAAA,CAGF,gCACE,QAAA,CACA,OAAA,CACA,WAAA,CACA,SAAA,CACA,eAAA,CAGF,gCACE,QAAA,CACA,SAAA,CACA,UAAA,CACA,UAAA,CACA,eAAA,CAGF,gCACE,QAAA,CACA,MAAA,CACA,WAAA,CACA,SAAA,CACA,eAAA,CAGF,iCACE,KAAA,CACA,OAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAGF,iCACE,QAAA,CACA,OAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAGF,iCACE,QAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAGF,iCACE,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAKJ,oCAEE,wBAAA,CAAA,gBAAA,CAEA,wCACE,yBAAA,CAKJ,yBACE,qBACE,UAAA,CACA,WAAA,CAGF,gBACE,WAAA,CAAA',sourcesContent:['// VTT 地图悬浮窗样式\r\n\r\n// 浮动按钮\r\n.vtt-map-button {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  z-index: 9999;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n\r\n  padding: 12px 20px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50px;\r\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\r\n\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n\r\n  transition: all 0.3s ease;\r\n\r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);\r\n  }\r\n\r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n\r\n  svg {\r\n    width: 24px;\r\n    height: 24px;\r\n  }\r\n}\r\n\r\n// 悬浮窗\r\n.vtt-floating-window {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n\r\n  width: 80vw;\r\n  height: 80vh;\r\n  max-width: 1400px;\r\n  min-width: 400px;\r\n  min-height: 300px;\r\n\r\n  background: #1a1a1a;\r\n  border: 2px solid #667eea;\r\n  border-radius: 12px;\r\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\r\n\r\n  z-index: 10000;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  overflow: hidden;\r\n\r\n  &.fullscreen {\r\n    top: 0;\r\n    left: 0;\r\n    transform: none;\r\n    width: 100vw !important;\r\n    height: 100vh !important;\r\n    border-radius: 0;\r\n    max-width: none;\r\n  }\r\n}\r\n\r\n// 标题栏\r\n.vtt-title-bar {\r\n  padding: 12px 20px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n\r\n  cursor: move;\r\n  user-select: none;\r\n\r\n  .vtt-title {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n\r\n    color: white;\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n\r\n    svg {\r\n      width: 20px;\r\n      height: 20px;\r\n    }\r\n  }\r\n\r\n  .vtt-controls {\r\n    display: flex;\r\n    gap: 8px;\r\n  }\r\n}\r\n\r\n// 控制按钮\r\n.vtt-control-btn {\r\n  padding: 6px 12px;\r\n  border: none;\r\n  border-radius: 5px;\r\n\r\n  color: white;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n\r\n  &:hover {\r\n    transform: scale(1.05);\r\n  }\r\n\r\n  &:active {\r\n    transform: scale(0.95);\r\n  }\r\n\r\n  &.vtt-minimize-btn {\r\n    background: #ff9800;\r\n\r\n    &:hover {\r\n      background: #fb8c00;\r\n    }\r\n  }\r\n\r\n  &.vtt-fullscreen-btn {\r\n    background: #2196f3;\r\n\r\n    &:hover {\r\n      background: #1e88e5;\r\n    }\r\n  }\r\n\r\n  &.vtt-close-btn {\r\n    background: #f44336;\r\n\r\n    &:hover {\r\n      background: #e53935;\r\n    }\r\n  }\r\n}\r\n\r\n// 内容区域\r\n.vtt-content {\r\n  flex: 1;\r\n  position: relative;\r\n  overflow: hidden;\r\n  background: #0a0a0a;\r\n\r\n  &.minimized {\r\n    display: none;\r\n  }\r\n}\r\n\r\n// 加载中\r\n.vtt-loading {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 20px;\r\n\r\n  background: #0a0a0a;\r\n  color: white;\r\n  z-index: 1;\r\n\r\n  .spinner {\r\n    width: 50px;\r\n    height: 50px;\r\n    border: 4px solid rgba(102, 126, 234, 0.3);\r\n    border-top-color: #667eea;\r\n    border-radius: 50%;\r\n    animation: spin 1s linear infinite;\r\n  }\r\n\r\n  p {\r\n    margin: 0;\r\n    font-size: 18px;\r\n    color: #667eea;\r\n  }\r\n\r\n  small {\r\n    font-size: 14px;\r\n    color: #999;\r\n  }\r\n\r\n  .error-icon {\r\n    font-size: 50px;\r\n  }\r\n}\r\n\r\n@keyframes spin {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n// iframe\r\n.vtt-iframe {\r\n  width: 100%;\r\n  height: 100%;\r\n  border: none;\r\n  background: white;\r\n}\r\n\r\n// 调整大小手柄\r\n.vtt-resize-handle {\r\n  position: absolute;\r\n  z-index: 10;\r\n\r\n  &.vtt-resize-n {\r\n    top: 0;\r\n    left: 10px;\r\n    right: 10px;\r\n    height: 5px;\r\n    cursor: n-resize;\r\n  }\r\n\r\n  &.vtt-resize-e {\r\n    top: 10px;\r\n    right: 0;\r\n    bottom: 10px;\r\n    width: 5px;\r\n    cursor: e-resize;\r\n  }\r\n\r\n  &.vtt-resize-s {\r\n    bottom: 0;\r\n    left: 10px;\r\n    right: 10px;\r\n    height: 5px;\r\n    cursor: s-resize;\r\n  }\r\n\r\n  &.vtt-resize-w {\r\n    top: 10px;\r\n    left: 0;\r\n    bottom: 10px;\r\n    width: 5px;\r\n    cursor: w-resize;\r\n  }\r\n\r\n  &.vtt-resize-ne {\r\n    top: 0;\r\n    right: 0;\r\n    width: 10px;\r\n    height: 10px;\r\n    cursor: ne-resize;\r\n  }\r\n\r\n  &.vtt-resize-se {\r\n    bottom: 0;\r\n    right: 0;\r\n    width: 10px;\r\n    height: 10px;\r\n    cursor: se-resize;\r\n  }\r\n\r\n  &.vtt-resize-sw {\r\n    bottom: 0;\r\n    left: 0;\r\n    width: 10px;\r\n    height: 10px;\r\n    cursor: sw-resize;\r\n  }\r\n\r\n  &.vtt-resize-nw {\r\n    top: 0;\r\n    left: 0;\r\n    width: 10px;\r\n    height: 10px;\r\n    cursor: nw-resize;\r\n  }\r\n}\r\n\r\n// 拖动和调整大小时的样式\r\nbody.vtt-dragging,\r\nbody.vtt-resizing {\r\n  user-select: none;\r\n\r\n  * {\r\n    cursor: inherit !important;\r\n  }\r\n}\r\n\r\n// 响应式\r\n@media (max-width: 768px) {\r\n  .vtt-floating-window {\r\n    width: 95vw;\r\n    height: 90vh;\r\n  }\r\n\r\n  .vtt-map-button {\r\n    bottom: 80px; // 避免遮挡移动端输入框\r\n  }\r\n}\r\n'],sourceRoot:''}]);const a=i},790:t=>{t.exports=function(t){var n=t[1],r=t[3];if(!r)return n;if('function'==typeof btoa){var e=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),A='sourceMappingURL=data:application/json;charset=utf-8;base64,'.concat(e),o='/*# '.concat(A,' */');return[n].concat([o]).join('\n')}return[n].join('\n')}},881:t=>{var n={};t.exports=function(t,r){var e=function(t){if(void 0===n[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}n[t]=r}return n[t]}(t);if(!e)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insert\' parameter is invalid.');e.appendChild(r)}}},n={};function r(e){var A=n[e];if(void 0!==A)return A.exports;var o=n[e]={id:e,exports:{}};return t[e](o,o.exports,r),o.exports}r.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return r.d(n,{a:n}),n},r.d=(t,n)=>{for(var e in n)r.o(n,e)&&!r.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},r.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r.nc=void 0;var e=r(234),A=r.n(e),o=r(219),i=r.n(o),a=r(881),s=r.n(a),d=r(714),C=r.n(d),l=r(134),c=r.n(l),p=r(699),h=r.n(p),u=r(733),v={};v.styleTagTransform=h(),v.setAttributes=C(),v.insert=s().bind(null,'head'),v.domAPI=i(),v.insertStyleElement=c();A()(u.A,v);u.A&&u.A.locals&&u.A.locals;const f='https://yyk9137.github.io/my-vtt-maps/vtt-map-viewer/index.html';function g(){const t=$('#vtt-floating-window');t.length>0?t.is(':visible')?t.hide():t.show():function(){const t=$('<div>').attr('id','vtt-floating-window').addClass('vtt-floating-window'),n=$('<div>').addClass('vtt-title-bar'),r=$('<div>').addClass('vtt-title').html('\n      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">\n        <path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"/>\n      </svg>\n      <span>VTT 地图查看器</span>\n    '),e=$('<div>').addClass('vtt-controls'),A=$('<button>').addClass('vtt-control-btn vtt-minimize-btn').attr('title','最小化').html('➖').on('click',()=>{const n=t.find('.vtt-content');n.hasClass('minimized')?(n.removeClass('minimized'),t.css('height','80vh'),A.html('➖')):(n.addClass('minimized'),t.css('height','auto'),A.html('⬜'))}),o=$('<button>').addClass('vtt-control-btn vtt-fullscreen-btn').attr('title','全屏').html('⛶').on('click',()=>{t.hasClass('fullscreen')?(t.removeClass('fullscreen'),o.html('⛶')):(t.addClass('fullscreen'),o.html('🗗'))}),i=$('<button>').addClass('vtt-control-btn vtt-close-btn').attr('title','关闭 (Esc)').html('❌').on('click',()=>{t.hide()});e.append(A,o,i),n.append(r,e);const a=$('<div>').addClass('vtt-content'),s=$('<div>').addClass('vtt-loading').html('\n      <div class="spinner"></div>\n      <p>正在加载 VTT 地图...</p>\n    '),d=$('<iframe>').addClass('vtt-iframe').attr('src',f).attr('allow','fullscreen').on('load',()=>{s.fadeOut(),toastr.success('🗺️ 地图加载完成')}).on('error',()=>{s.html('\n        <div class="error-icon">⚠️</div>\n        <p>地图加载失败</p>\n        <small>请检查 URL 是否正确</small>\n      '),toastr.error('❌ 地图加载失败')});a.append(s,d),t.append(n,a),$('body').append(t),function(t,n){let r=!1,e=0,A=0;n.on('mousedown',o=>{if($(o.target).closest('.vtt-control-btn').length>0)return;r=!0;const i=t.offset();e=o.pageX-i.left,A=o.pageY-i.top,n.css('cursor','grabbing'),$('body').addClass('vtt-dragging')}),$(document).on('mousemove.vtt-drag',n=>{if(r&&!t.hasClass('fullscreen')){const r=n.pageX-e,o=n.pageY-A,i=$(t).width()-t.outerWidth(),a=$(t).height()-t.outerHeight();t.css({left:Math.max(0,Math.min(r,i))+'px',top:Math.max(0,Math.min(o,a))+'px',transform:'none'})}}),$(document).on('mouseup.vtt-drag',()=>{r&&(r=!1,n.css('cursor','move'),$('body').removeClass('vtt-dragging'))})}(t,n),function(t){['n','e','s','w','ne','se','sw','nw'].forEach(n=>{const r=$('<div>').addClass(`vtt-resize-handle vtt-resize-${n}`).attr('data-direction',n);t.append(r)});let n=!1,r='',e=0,A=0,o=0,i=0,a=0,s=0;t.find('.vtt-resize-handle').on('mousedown',d=>{t.hasClass('fullscreen')||(n=!0,r=$(d.currentTarget).attr('data-direction'),e=d.pageX,A=d.pageY,o=t.width(),i=t.height(),a=t.offset().left,s=t.offset().top,$('body').addClass('vtt-resizing'),d.preventDefault())}),$(document).on('mousemove.vtt-resize',d=>{if(n){const n=d.pageX-e,C=d.pageY-A;let l=o,c=i,p=a,h=s;r.includes('e')&&(l=o+n),r.includes('w')&&(l=o-n,p=a+n),r.includes('s')&&(c=i+C),r.includes('n')&&(c=i-C,h=s+C),l=Math.max(400,l),c=Math.max(300,c),t.css({width:l+'px',height:c+'px',left:p+'px',top:h+'px'})}}),$(document).on('mouseup.vtt-resize',()=>{n&&(n=!1,$('body').removeClass('vtt-resizing'))})}(t),$(document).on('keydown.vtt-window',n=>{'Escape'===n.key&&t.is(':visible')&&t.hide()}),t.fadeIn(300)}()}$(()=>{toastr.success('🗺️ VTT 地图悬浮窗已加载'),function(){if($('#vtt-map-button').length>0)return;const t=$('<button>').attr('id','vtt-map-button').attr('title','打开 VTT 地图 (Ctrl+M)').addClass('vtt-map-button').html('\n      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">\n        <path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"/>\n      </svg>\n      <span>地图</span>\n    ').on('click',()=>{g()});$('body').append(t)}(),$(document).on('keydown',t=>{t.ctrlKey&&'m'===t.key&&(t.preventDefault(),g())})}),$(window).on('pagehide',()=>{$('#vtt-map-button').remove(),$('#vtt-floating-window').remove(),toastr.info('🗺️ VTT 地图悬浮窗已卸载')})})();
//# sourceMappingURL=index.js.map
