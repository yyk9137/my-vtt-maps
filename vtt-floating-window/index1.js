(()=>{'use strict';var t={24:(t,n,e)=>{e.d(n,{A:()=>a});var A=e(790),o=e.n(A),r=e(54),i=e.n(r)()(o());i.push([t.id,'.vtt-map-button{position:fixed;bottom:20px;right:20px;z-index:9999;display:flex;align-items:center;gap:8px;padding:12px 20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;border-radius:50px;box-shadow:0 4px 15px rgba(102,126,234,.4);font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease}.vtt-map-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,.6)}.vtt-map-button:active{transform:translateY(0)}.vtt-map-button svg{width:24px;height:24px}.vtt-floating-window{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:80vw;height:80vh;max-width:1400px;min-width:400px;min-height:300px;background:#1a1a1a;border:2px solid #667eea;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,.5);z-index:10000;display:flex;flex-direction:column;overflow:hidden}.vtt-floating-window.fullscreen{top:0;left:0;transform:none;width:100vw !important;height:100vh !important;border-radius:0;max-width:none}.vtt-title-bar{padding:12px 20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;justify-content:space-between;align-items:center;cursor:move;-webkit-user-select:none;user-select:none}.vtt-title-bar .vtt-title{display:flex;align-items:center;gap:10px;color:#fff;font-size:18px;font-weight:600}.vtt-title-bar .vtt-title svg{width:20px;height:20px}.vtt-title-bar .vtt-controls{display:flex;gap:8px}.vtt-control-btn{padding:6px 12px;border:none;border-radius:5px;color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.vtt-control-btn:hover{transform:scale(1.05)}.vtt-control-btn:active{transform:scale(0.95)}.vtt-control-btn.vtt-minimize-btn{background:#ff9800}.vtt-control-btn.vtt-minimize-btn:hover{background:#fb8c00}.vtt-control-btn.vtt-fullscreen-btn{background:#2196f3}.vtt-control-btn.vtt-fullscreen-btn:hover{background:#1e88e5}.vtt-control-btn.vtt-close-btn{background:#f44336}.vtt-control-btn.vtt-close-btn:hover{background:#e53935}.vtt-content{flex:1;position:relative;overflow:hidden;background:#0a0a0a}.vtt-content.minimized{display:none}.vtt-loading{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;background:#0a0a0a;color:#fff;z-index:1}.vtt-loading .spinner{width:50px;height:50px;border:4px solid rgba(102,126,234,.3);border-top-color:#667eea;border-radius:50%;animation:spin 1s linear infinite}.vtt-loading p{margin:0;font-size:18px;color:#667eea}.vtt-loading small{font-size:14px;color:#999}.vtt-loading .error-icon{font-size:50px}@keyframes spin{to{transform:rotate(360deg)}}.vtt-iframe{width:100%;height:100%;border:none;background:#fff}.vtt-resize-handle{position:absolute;z-index:10}.vtt-resize-handle.vtt-resize-n{top:0;left:10px;right:10px;height:5px;cursor:n-resize}.vtt-resize-handle.vtt-resize-e{top:10px;right:0;bottom:10px;width:5px;cursor:e-resize}.vtt-resize-handle.vtt-resize-s{bottom:0;left:10px;right:10px;height:5px;cursor:s-resize}.vtt-resize-handle.vtt-resize-w{top:10px;left:0;bottom:10px;width:5px;cursor:w-resize}.vtt-resize-handle.vtt-resize-ne{top:0;right:0;width:10px;height:10px;cursor:ne-resize}.vtt-resize-handle.vtt-resize-se{bottom:0;right:0;width:10px;height:10px;cursor:se-resize}.vtt-resize-handle.vtt-resize-sw{bottom:0;left:0;width:10px;height:10px;cursor:sw-resize}.vtt-resize-handle.vtt-resize-nw{top:0;left:0;width:10px;height:10px;cursor:nw-resize}body.vtt-dragging,body.vtt-resizing{-webkit-user-select:none;user-select:none}body.vtt-dragging *,body.vtt-resizing *{cursor:inherit !important}@media (max-width:768px){.vtt-floating-window{width:95vw;height:90vh}.vtt-map-button{bottom:80px}}','',{version:3,sources:['webpack://./src/vtt-floating-window-fixed/index.scss'],names:[],mappings:'AAGA,gBACE,cAAA,CACA,WAAA,CACA,UAAA,CACA,YAAA,CAEA,YAAA,CACA,kBAAA,CACA,OAAA,CAEA,iBAAA,CACA,0DAAA,CACA,UAAA,CACA,WAAA,CACA,kBAAA,CACA,0CAAA,CAEA,cAAA,CACA,eAAA,CACA,cAAA,CAEA,uBAAA,CAEA,sBACE,0BAAA,CACA,0CAAA,CAGF,uBACE,uBAAA,CAGF,oBACE,UAAA,CACA,WAAA,CAKJ,qBACE,cAAA,CACA,OAAA,CACA,QAAA,CACA,8BAAA,CAEA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,eAAA,CACA,gBAAA,CAEA,kBAAA,CACA,wBAAA,CACA,kBAAA,CACA,qCAAA,CAEA,aAAA,CACA,YAAA,CACA,qBAAA,CAEA,eAAA,CAEA,gCACE,KAAA,CACA,MAAA,CACA,cAAA,CACA,sBAAA,CACA,uBAAA,CACA,eAAA,CACA,cAAA,CAKJ,eACE,iBAAA,CACA,0DAAA,CAEA,YAAA,CACA,6BAAA,CACA,kBAAA,CAEA,WAAA,CACA,wBAAA,CAAA,gBAAA,CAEA,0BACE,YAAA,CACA,kBAAA,CACA,QAAA,CAEA,UAAA,CACA,cAAA,CACA,eAAA,CAEA,8BACE,UAAA,CACA,WAAA,CAIJ,6BACE,YAAA,CACA,OAAA,CAKJ,iBACE,gBAAA,CACA,WAAA,CACA,iBAAA,CAEA,UAAA,CACA,cAAA,CACA,eAAA,CAEA,cAAA,CACA,uBAAA,CAEA,uBACE,qBAAA,CAGF,wBACE,qBAAA,CAGF,kCACE,kBAAA,CAEA,wCACE,kBAAA,CAIJ,oCACE,kBAAA,CAEA,0CACE,kBAAA,CAIJ,+BACE,kBAAA,CAEA,qCACE,kBAAA,CAMN,aACE,MAAA,CACA,iBAAA,CACA,eAAA,CACA,kBAAA,CAEA,uBACE,YAAA,CAKJ,aACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CAEA,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,kBAAA,CACA,QAAA,CAEA,kBAAA,CACA,UAAA,CACA,SAAA,CAEA,sBACE,UAAA,CACA,WAAA,CACA,qCAAA,CACA,wBAAA,CACA,iBAAA,CACA,iCAAA,CAGF,eACE,QAAA,CACA,cAAA,CACA,aAAA,CAGF,mBACE,cAAA,CACA,UAAA,CAGF,yBACE,cAAA,CAIJ,gBACE,GACE,wBAAA,CAAA,CAKJ,YACE,UAAA,CACA,WAAA,CACA,WAAA,CACA,eAAA,CAIF,mBACE,iBAAA,CACA,UAAA,CAEA,gCACE,KAAA,CACA,SAAA,CACA,UAAA,CACA,UAAA,CACA,eAAA,CAGF,gCACE,QAAA,CACA,OAAA,CACA,WAAA,CACA,SAAA,CACA,eAAA,CAGF,gCACE,QAAA,CACA,SAAA,CACA,UAAA,CACA,UAAA,CACA,eAAA,CAGF,gCACE,QAAA,CACA,MAAA,CACA,WAAA,CACA,SAAA,CACA,eAAA,CAGF,iCACE,KAAA,CACA,OAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAGF,iCACE,QAAA,CACA,OAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAGF,iCACE,QAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAGF,iCACE,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAKJ,oCAEE,wBAAA,CAAA,gBAAA,CAEA,wCACE,yBAAA,CAKJ,yBACE,qBACE,UAAA,CACA,WAAA,CAGF,gBACE,WAAA,CAAA',sourcesContent:['// VTT 地图悬浮窗样式\n\n// 浮动按钮\n.vtt-map-button {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  z-index: 9999;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  padding: 12px 20px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 50px;\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n\n  transition: all 0.3s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n\n  svg {\n    width: 24px;\n    height: 24px;\n  }\n}\n\n// 悬浮窗\n.vtt-floating-window {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 80vw;\n  height: 80vh;\n  max-width: 1400px;\n  min-width: 400px;\n  min-height: 300px;\n\n  background: #1a1a1a;\n  border: 2px solid #667eea;\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\n\n  z-index: 10000;\n  display: flex;\n  flex-direction: column;\n\n  overflow: hidden;\n\n  &.fullscreen {\n    top: 0;\n    left: 0;\n    transform: none;\n    width: 100vw !important;\n    height: 100vh !important;\n    border-radius: 0;\n    max-width: none;\n  }\n}\n\n// 标题栏\n.vtt-title-bar {\n  padding: 12px 20px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  cursor: move;\n  user-select: none;\n\n  .vtt-title {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n\n    color: white;\n    font-size: 18px;\n    font-weight: 600;\n\n    svg {\n      width: 20px;\n      height: 20px;\n    }\n  }\n\n  .vtt-controls {\n    display: flex;\n    gap: 8px;\n  }\n}\n\n// 控制按钮\n.vtt-control-btn {\n  padding: 6px 12px;\n  border: none;\n  border-radius: 5px;\n\n  color: white;\n  font-size: 14px;\n  font-weight: 600;\n\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    transform: scale(1.05);\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n\n  &.vtt-minimize-btn {\n    background: #ff9800;\n\n    &:hover {\n      background: #fb8c00;\n    }\n  }\n\n  &.vtt-fullscreen-btn {\n    background: #2196f3;\n\n    &:hover {\n      background: #1e88e5;\n    }\n  }\n\n  &.vtt-close-btn {\n    background: #f44336;\n\n    &:hover {\n      background: #e53935;\n    }\n  }\n}\n\n// 内容区域\n.vtt-content {\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n  background: #0a0a0a;\n\n  &.minimized {\n    display: none;\n  }\n}\n\n// 加载中\n.vtt-loading {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n\n  background: #0a0a0a;\n  color: white;\n  z-index: 1;\n\n  .spinner {\n    width: 50px;\n    height: 50px;\n    border: 4px solid rgba(102, 126, 234, 0.3);\n    border-top-color: #667eea;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  p {\n    margin: 0;\n    font-size: 18px;\n    color: #667eea;\n  }\n\n  small {\n    font-size: 14px;\n    color: #999;\n  }\n\n  .error-icon {\n    font-size: 50px;\n  }\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n// iframe\n.vtt-iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n  background: white;\n}\n\n// 调整大小手柄\n.vtt-resize-handle {\n  position: absolute;\n  z-index: 10;\n\n  &.vtt-resize-n {\n    top: 0;\n    left: 10px;\n    right: 10px;\n    height: 5px;\n    cursor: n-resize;\n  }\n\n  &.vtt-resize-e {\n    top: 10px;\n    right: 0;\n    bottom: 10px;\n    width: 5px;\n    cursor: e-resize;\n  }\n\n  &.vtt-resize-s {\n    bottom: 0;\n    left: 10px;\n    right: 10px;\n    height: 5px;\n    cursor: s-resize;\n  }\n\n  &.vtt-resize-w {\n    top: 10px;\n    left: 0;\n    bottom: 10px;\n    width: 5px;\n    cursor: w-resize;\n  }\n\n  &.vtt-resize-ne {\n    top: 0;\n    right: 0;\n    width: 10px;\n    height: 10px;\n    cursor: ne-resize;\n  }\n\n  &.vtt-resize-se {\n    bottom: 0;\n    right: 0;\n    width: 10px;\n    height: 10px;\n    cursor: se-resize;\n  }\n\n  &.vtt-resize-sw {\n    bottom: 0;\n    left: 0;\n    width: 10px;\n    height: 10px;\n    cursor: sw-resize;\n  }\n\n  &.vtt-resize-nw {\n    top: 0;\n    left: 0;\n    width: 10px;\n    height: 10px;\n    cursor: nw-resize;\n  }\n}\n\n// 拖动和调整大小时的样式\nbody.vtt-dragging,\nbody.vtt-resizing {\n  user-select: none;\n\n  * {\n    cursor: inherit !important;\n  }\n}\n\n// 响应式\n@media (max-width: 768px) {\n  .vtt-floating-window {\n    width: 95vw;\n    height: 90vh;\n  }\n\n  .vtt-map-button {\n    bottom: 80px; // 避免遮挡移动端输入框\n  }\n}\n'],sourceRoot:''}]);const a=i},54:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map(function(n){var e='',A=void 0!==n[5];return n[4]&&(e+='@supports ('.concat(n[4],') {')),n[2]&&(e+='@media '.concat(n[2],' {')),A&&(e+='@layer'.concat(n[5].length>0?' '.concat(n[5]):'',' {')),e+=t(n),A&&(e+='}'),n[2]&&(e+='}'),n[4]&&(e+='}'),e}).join('')},n.i=function(t,e,A,o,r){'string'==typeof t&&(t=[[null,t,void 0]]);var i={};if(A)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(i[s]=!0)}for(var d=0;d<t.length;d++){var C=[].concat(t[d]);A&&i[C[0]]||(void 0!==r&&(void 0===C[5]||(C[1]='@layer'.concat(C[5].length>0?' '.concat(C[5]):'',' {').concat(C[1],'}')),C[5]=r),e&&(C[2]?(C[1]='@media '.concat(C[2],' {').concat(C[1],'}'),C[2]=e):C[2]=e),o&&(C[4]?(C[1]='@supports ('.concat(C[4],') {').concat(C[1],'}'),C[4]=o):C[4]=''.concat(o)),n.push(C))}},n}},134:t=>{t.exports=function(t){var n=document.createElement('style');return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},219:t=>{t.exports=function(t){if('undefined'==typeof document)return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var A='';e.supports&&(A+='@supports ('.concat(e.supports,') {')),e.media&&(A+='@media '.concat(e.media,' {'));var o=void 0!==e.layer;o&&(A+='@layer'.concat(e.layer.length>0?' '.concat(e.layer):'',' {')),A+=e.css,o&&(A+='}'),e.media&&(A+='}'),e.supports&&(A+='}');var r=e.sourceMap;r&&'undefined'!=typeof btoa&&(A+='\n/*# sourceMappingURL=data:application/json;base64,'.concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),' */')),n.styleTagTransform(A,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}},234:t=>{var n=[];function e(t){for(var e=-1,A=0;A<n.length;A++)if(n[A].identifier===t){e=A;break}return e}function A(t,A){for(var r={},i=[],a=0;a<t.length;a++){var s=t[a],d=A.base?s[0]+A.base:s[0],C=r[d]||0,l=''.concat(d,' ').concat(C);r[d]=C+1;var c=e(l),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==c)n[c].references++,n[c].updater(p);else{var h=o(p,A);A.byIndex=a,n.splice(a,0,{identifier:l,updater:h,references:1})}i.push(l)}return i}function o(t,n){var e=n.domAPI(n);e.update(t);return function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,o){var r=A(t=t||[],o=o||{});return function(t){t=t||[];for(var i=0;i<r.length;i++){var a=e(r[i]);n[a].references--}for(var s=A(t,o),d=0;d<r.length;d++){var C=e(r[d]);0===n[C].references&&(n[C].updater(),n.splice(C,1))}r=s}}},699:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}},714:(t,n,e)=>{t.exports=function(t){var n=e.nc;n&&t.setAttribute('nonce',n)}},790:t=>{t.exports=function(t){var n=t[1],e=t[3];if(!e)return n;if('function'==typeof btoa){var A=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),o='sourceMappingURL=data:application/json;charset=utf-8;base64,'.concat(A),r='/*# '.concat(o,' */');return[n].concat([r]).join('\n')}return[n].join('\n')}},881:t=>{var n={};t.exports=function(t,e){var A=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!A)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insert\' parameter is invalid.');A.appendChild(e)}}},n={};function e(A){var o=n[A];if(void 0!==o)return o.exports;var r=n[A]={id:A,exports:{}};return t[A](r,r.exports,e),r.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var A in n)e.o(n,A)&&!e.o(t,A)&&Object.defineProperty(t,A,{enumerable:!0,get:n[A]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.nc=void 0;var A=e(234),o=e.n(A),r=e(219),i=e.n(r),a=e(881),s=e.n(a),d=e(714),C=e.n(d),l=e(134),c=e.n(l),p=e(699),h=e.n(p),u=e(24),v={};v.styleTagTransform=h(),v.setAttributes=C(),v.insert=s().bind(null,'head'),v.domAPI=i(),v.insertStyleElement=c();o()(u.A,v);u.A&&u.A.locals&&u.A.locals;const f='https://yyk9137.github.io/my-vtt-maps/vtt-map-viewer/index.html';function g(){return'function'==typeof getScriptId?getScriptId():'vtt-floating-window'}function x(){const t=$('#vtt-floating-window');t.length>0?t.is(':visible')?t.hide():t.show():function(){const t=$('<div>').attr('id','vtt-floating-window').addClass('vtt-floating-window'),n=$('<div>').addClass('vtt-title-bar'),e=$('<div>').addClass('vtt-title').html('\n      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">\n        <path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"/>\n      </svg>\n      <span>VTT 地图查看器</span>\n    '),A=$('<div>').addClass('vtt-controls'),o=$('<button>').addClass('vtt-control-btn vtt-minimize-btn').attr('title','最小化').html('➖').on('click',()=>{const n=t.find('.vtt-content');n.hasClass('minimized')?(n.removeClass('minimized'),t.css('height','80vh'),o.html('➖')):(n.addClass('minimized'),t.css('height','auto'),o.html('⬜'))}),r=$('<button>').addClass('vtt-control-btn vtt-fullscreen-btn').attr('title','全屏').html('⛶').on('click',()=>{t.hasClass('fullscreen')?(t.removeClass('fullscreen'),r.html('⛶')):(t.addClass('fullscreen'),r.html('🗗'))}),i=$('<button>').addClass('vtt-control-btn vtt-close-btn').attr('title','关闭 (Esc)').html('❌').on('click',()=>{t.hide()});A.append(o,r,i),n.append(e,A);const a=$('<div>').addClass('vtt-content'),s=$('<div>').addClass('vtt-loading').html('\n      <div class="spinner"></div>\n      <p>正在加载 VTT 地图...</p>\n    '),d=$('<iframe>').addClass('vtt-iframe').attr('src',f).attr('allow','fullscreen').on('load',()=>{s.fadeOut(),toastr.success('🗺️ 地图加载完成')}).on('error',()=>{s.html('\n        <div class="error-icon">⚠️</div>\n        <p>地图加载失败</p>\n        <small>请检查 URL 是否正确</small>\n      '),toastr.error('❌ 地图加载失败')});a.append(s,d),t.append(n,a),$('body').append(t),function(t,n){let e=!1,A=0,o=0;n.on('mousedown',r=>{if($(r.target).closest('.vtt-control-btn').length>0)return;e=!0;const i=t.offset();A=r.pageX-i.left,o=r.pageY-i.top,n.css('cursor','grabbing'),$('body').addClass('vtt-dragging')}),$(document).on('mousemove.vtt-drag',n=>{if(e&&!t.hasClass('fullscreen')){const e=n.pageX-A,r=n.pageY-o,i=$(t).width()-t.outerWidth(),a=$(t).height()-t.outerHeight();t.css({left:Math.max(0,Math.min(e,i))+'px',top:Math.max(0,Math.min(r,a))+'px',transform:'none'})}}),$(document).on('mouseup.vtt-drag',()=>{e&&(e=!1,n.css('cursor','move'),$('body').removeClass('vtt-dragging'))})}(t,n),function(t){['n','e','s','w','ne','se','sw','nw'].forEach(n=>{const e=$('<div>').addClass(`vtt-resize-handle vtt-resize-${n}`).attr('data-direction',n);t.append(e)});let n=!1,e='',A=0,o=0,r=0,i=0,a=0,s=0;t.find('.vtt-resize-handle').on('mousedown',d=>{t.hasClass('fullscreen')||(n=!0,e=$(d.currentTarget).attr('data-direction'),A=d.pageX,o=d.pageY,r=t.width(),i=t.height(),a=t.offset().left,s=t.offset().top,$('body').addClass('vtt-resizing'),d.preventDefault())}),$(document).on('mousemove.vtt-resize',d=>{if(n){const n=d.pageX-A,C=d.pageY-o;let l=r,c=i,p=a,h=s;e.includes('e')&&(l=r+n),e.includes('w')&&(l=r-n,p=a+n),e.includes('s')&&(c=i+C),e.includes('n')&&(c=i-C,h=s+C),l=Math.max(400,l),c=Math.max(300,c),t.css({width:l+'px',height:c+'px',left:p+'px',top:h+'px'})}}),$(document).on('mouseup.vtt-resize',()=>{n&&(n=!1,$('body').removeClass('vtt-resizing'))})}(t),$(document).on('keydown.vtt-window',n=>{'Escape'===n.key&&t.is(':visible')&&t.hide()}),t.fadeIn(300)}()}$(()=>{toastr.success('🗺️ VTT 地图悬浮窗已加载'),function(){const t=g();if($(`head > div[script_id="${t}"]`).length>0)return;const n=$('<div>').attr('script_id',t).append($('head > style',document).clone());$('head').append(n)}(),function(){if($('#vtt-map-button').length>0)return;const t=$('<button>').attr('id','vtt-map-button').attr('title','打开 VTT 地图 (Ctrl+M)').addClass('vtt-map-button').html('\n      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">\n        <path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"/>\n      </svg>\n      <span>地图</span>\n    ').on('click',()=>{x()});$('body').append(t)}(),$(document).on('keydown',t=>{t.ctrlKey&&'m'===t.key&&(t.preventDefault(),x())})}),$(window).on('pagehide',()=>{!function(){const t=g();$(`head > div[script_id="${t}"]`).remove()}(),$('#vtt-map-button').remove(),$('#vtt-floating-window').remove(),toastr.info('🗺️ VTT 地图悬浮窗已卸载')})})();
//# sourceMappingURL=index.js.map
