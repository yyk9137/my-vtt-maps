<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>VTT 地图查看器</title><script type="module">import{Fragment as e,computed as a,createApp as t,createCommentVNode as n,createElementBlock as l,createElementVNode as o,createTextVNode as i,createVNode as s,defineComponent as r,onMounted as u,onUnmounted as d,openBlock as c,ref as p,renderList as v,toDisplayString as f,vModelText as m,watch as h,withDirectives as g}from'https://testingcf.jsdelivr.net/npm/vue/+esm';import{gsap as b}from'https://testingcf.jsdelivr.net/npm/gsap/+esm';import{Application as k,Assets as y,Container as x,Graphics as w,Sprite as C,Text as D}from'https://testingcf.jsdelivr.net/npm/pixi.js/+esm';import{default as T}from'https://testingcf.jsdelivr.net/npm/lodash/+esm';var M={42:(e,a)=>{a.A=(e,a)=>{const t=e.__vccOpts||e;for(const[e,n]of a)t[e]=n;return t}}},V={};const j={class:'map-controls'},S={key:0,class:'token-info'},E=r({__name:'MapCanvas',props:{mapData:{},tokens:{}},emits:['tokenMove','tokenSelect'],setup(e,{emit:a}){const t=e,i=a,s=p(),r=p(),v=p(!0),m=p(t.mapData.fogOfWar.enabled),g=p(!t.mapData.globalLight),T=p(!0),M=p(null);let V=null,E=null,U=null,A=null,O=null,L=null,I=null,N=null;const R=p({x:0,y:0,scale:1}),{isLineBlocked:Y,calculateFOVShadowCasting:B}=function(){function e(e,t,n,l,o){for(const i of o){if(0===i.sense)continue;if(i.door>0&&1===i.ds)continue;const[o,s,r,u]=i.c;if(a(e,t,n,l,o,s,r,u))return!0}return!1}function a(e,a,t,n,l,o,i,s){const r=(s-o)*(t-e)-(i-l)*(n-a);if(Math.abs(r)<1e-10)return!1;const u=((i-l)*(a-o)-(s-o)*(e-l))/r,d=((t-e)*(a-o)-(n-a)*(e-l))/r;return u>=0&&u<=1&&d>=0&&d<=1}function t(e,a,l,o,i,s,r,u,d,c,p,v,f){if(i<s)return;let m=i;for(let h=o;h<=l;h++){let o=!1;for(let g=-h;g<=0;g++){const b=-h,k=(g-.5)/(b+.5),y=(g+.5)/(b-.5);if(i<y)continue;if(s>k)break;const x=e+g*r+b*u,w=a+g*d+b*c;if(Math.abs(x-e)+Math.abs(w-a)<=l&&f.add(`${x},${w}`),o){if(n(x,w,p,v)){m=y;continue}o=!1,i=m}else n(x,w,p,v)&&h<l&&(o=!0,t(e,a,l,h+1,i,k,r,u,d,c,p,v,f),m=y)}if(o)break}}function n(e,a,t,n){const l=e*n+n/2,o=a*n+n/2;for(const e of t){if(0===e.sense)continue;if(e.door>0&&1===e.ds)continue;const[a,t,n,i]=e.c,s=Math.min(a,n),r=Math.max(a,n),u=Math.min(t,i),d=Math.max(t,i);if(l>=s&&l<=r&&o>=u&&o<=d)return!0}return!1}return{isLineBlocked:e,calculateVisibleArea:function(a,t,n){const l=[],o=a.x,i=a.y,s=a.vision*n;if(s<=0)return l;const r=2*Math.PI/360;for(let a=0;a<360;a++){const u=a*r,d=Math.cos(u),c=Math.sin(u);for(let a=0;a<=s;a+=n/2){const s=o+d*a,r=i+c*a;if(e(o,i,s,r,t))break;const u=Math.floor(s/n),p=Math.floor(r/n);l.some(e=>e.x===u&&e.y===p)||l.push({x:u,y:p})}}return l},calculateFOVShadowCasting:function(e,a,n,l,o){const i=new Set,s=Math.floor(e/o),r=Math.floor(a/o);i.add(`${s},${r}`);const u=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];for(const[e,a]of u)t(s,r,n,1,1,0,e,a,0,0,l,o,i);return i}}}();function X(){if(!A)return;if(A.clear(),!v.value)return;const{width:e,height:a,grid:n,gridColor:l,gridAlpha:o}=t.mapData;A.lineStyle(1,parseInt(l.replace('#','0x')),o);for(let t=0;t<=e;t+=n)A.moveTo(t,0),A.lineTo(t,a);for(let t=0;t<=a;t+=n)A.moveTo(0,t),A.lineTo(e,t);A.stroke()}function F(){if(L&&(L.removeChildren(),g.value))for(const e of t.mapData.lights){const a=new w,n=e.dim*t.mapData.grid,l=e.bright*t.mapData.grid,o=parseInt(e.tintColor.replace('#','0x'));n>0&&(a.circle(e.x,e.y,n),a.fill({color:o,alpha:.2*e.tintAlpha})),l>0&&(a.circle(e.x,e.y,l),a.fill({color:o,alpha:.5*e.tintAlpha})),a.circle(e.x,e.y,5),a.fill({color:16776960,alpha:.8}),L.addChild(a),b.to(a,{alpha:.7,duration:1+Math.random(),repeat:-1,yoyo:!0,ease:'power1.inOut'})}}function W(){if(!I)return;I.removeChildren();const e=t.tokens||t.mapData.tokens||[];for(const a of e){const e=new w,n=a.width*t.mapData.grid,l=a.x,o=a.y;e.circle(l,o,n/2),e.fill({color:65280,alpha:.6}),e.stroke({width:2,color:16777215});const s=new D({text:a.name,style:{fontSize:12,fill:16777215,stroke:{color:0,width:2}}});s.anchor.set(.5),s.x=l,s.y=o+n/2+10,e.addChild(s),e.eventMode='static',e.cursor='pointer';let r=!1,u=null;e.on('pointerdown',e=>{r=!0;const t=e.global;u={x:t.x-l,y:t.y-o},M.value=a,i('tokenSelect',a)}),e.on('pointerup',()=>{r=!1,u=null}),e.on('pointermove',t=>{if(r&&u){const n=t.global,s=n.x-u.x,r=n.y-u.y;e.x=s-l,e.y=r-o,i('tokenMove',a,s,r)}}),I.addChild(e)}}function J(){if(!N)return;if(N.clear(),!m.value)return;N.rect(0,0,t.mapData.width,t.mapData.height),N.fill({color:0,alpha:.8});const e=t.tokens||t.mapData.tokens||[];for(const a of e){if(a.vision<=0)continue;const e=B(a.x,a.y,a.vision,t.mapData.walls,t.mapData.grid);for(const a of e){const[e,n]=a.split(',').map(Number),l=e*t.mapData.grid,o=n*t.mapData.grid;N.rect(l,o,t.mapData.grid,t.mapData.grid),N.fill({color:0,alpha:-1})}}}function P(){R.value.scale*=1.2,b.to(V.stage.scale,{x:R.value.scale,y:R.value.scale,duration:.3})}function H(){R.value.scale*=.8,b.to(V.stage.scale,{x:R.value.scale,y:R.value.scale,duration:.3})}function G(){R.value={x:0,y:0,scale:1},b.to(V.stage,{x:0,y:0,duration:.5}),b.to(V.stage.scale,{x:1,y:1,duration:.5})}function q(){v.value=!v.value,X()}function K(){m.value=!m.value,J()}function Q(){g.value=!g.value,F()}function Z(){T.value=!T.value,U&&(U.visible=T.value)}return u(async()=>{if(!s.value||!r.value)return;V=new k,await V.init({canvas:r.value,width:s.value.clientWidth,height:s.value.clientHeight,backgroundColor:t.mapData.backgroundColor||'#000000',antialias:!0});const e=new x,a=new x,n=new x;L=new x,I=new x;const l=new x,o=new x;if(V.stage.addChild(e),V.stage.addChild(a),V.stage.addChild(n),V.stage.addChild(L),V.stage.addChild(I),V.stage.addChild(l),V.stage.addChild(o),t.mapData.img){const a=await y.load(t.mapData.img);E=new C(a),E.width=t.mapData.width,E.height=t.mapData.height,e.addChild(E)}if(t.mapData.foreground){const e=await y.load(t.mapData.foreground);U=new C(e),U.width=t.mapData.width,U.height=t.mapData.height,l.addChild(U),toastr.info('已加载前景层 (遮挡物)')}A=new w,a.addChild(A),X(),O=new w,n.addChild(O),function(){if(!O)return;O.clear();for(const e of t.mapData.walls){const[a,t,n,l]=e.c;let o=16777215,i=.8,s=3;1===e.door?(o=9127187,s=1===e.ds?2:4):2===e.door&&(o=9662683,i=.5),0===e.sense&&(o=4286945,i=.4),O.lineStyle(s,o,i),O.moveTo(a,t),O.lineTo(n,l)}O.stroke()}(),F(),W(),N=new w,o.addChild(N),m.value&&J(),function(){if(!V)return;let e=!1,a={x:0,y:0};V.stage.eventMode='static',V.stage.on('pointerdown',t=>{t.target===V?.stage&&(e=!0,a={x:t.globalX,y:t.globalY})}),V.stage.on('pointerup',()=>{e=!1}),V.stage.on('pointermove',t=>{if(e){const e=t.globalX-a.x,n=t.globalY-a.y;V.stage.x+=e,V.stage.y+=n,a={x:t.globalX,y:t.globalY}}}),r.value?.addEventListener('wheel',e=>{e.preventDefault();const a=e.deltaY>0?.9:1.1,t=R.value.scale*a;t>=.1&&t<=5&&(R.value.scale=t,b.to(V.stage.scale,{x:t,y:t,duration:.2,ease:'power2.out'}))})}();const i=new ResizeObserver(()=>{V&&s.value&&V.renderer.resize(s.value.clientWidth,s.value.clientHeight)});i.observe(s.value),d(()=>{i.disconnect()})}),h(()=>t.tokens,()=>{W(),m.value&&J()},{deep:!0}),d(()=>{V?.destroy(!0)}),(e,a)=>(c(),l('div',{class:'map-canvas-container',ref_key:'containerRef',ref:s},[o('canvas',{ref_key:'canvasRef',ref:r},null,512),n(' 控制面板 '),o('div',j,[o('button',{onClick:P,title:'放大'},[...a[1]||(a[1]=[o('span',null,'🔍+',-1)])]),o('button',{onClick:H,title:'缩小'},[...a[2]||(a[2]=[o('span',null,'🔍-',-1)])]),o('button',{onClick:G,title:'重置视图'},[...a[3]||(a[3]=[o('span',null,'🏠',-1)])]),o('button',{onClick:q,title:'显示/隐藏网格'},[o('span',null,f(v.value?'⊞':'⊟'),1)]),o('button',{onClick:K,title:'战争迷雾'},[o('span',null,f(m.value?'🌫️':'☀️'),1)]),o('button',{onClick:Q,title:'光照系统'},[o('span',null,f(g.value?'💡':'🔦'),1)]),t.mapData.foreground?(c(),l('button',{key:0,onClick:Z,title:'显示/隐藏前景层'},[o('span',null,f(T.value?'🏠':'🏚️'),1)])):n('v-if',!0)]),n(' Token 信息面板 '),M.value?(c(),l('div',S,[o('h3',null,f(M.value.name),1),o('p',null,'位置: ('+f(Math.floor(M.value.x))+', '+f(Math.floor(M.value.y))+')',1),o('p',null,'视野: '+f(M.value.vision)+' 格',1),o('button',{onClick:a[0]||(a[0]=e=>M.value=null)},'关闭')])):n('v-if',!0)],512))}});var U=function e(a){var t=V[a];if(void 0!==t)return t.exports;var n=V[a]={exports:{}};return M[a](n,n.exports,e),n.exports}(42);const A=(0,U.A)(E,[['__scopeId','data-v-6d3eac8c']]),O=z,L=O.z.object({x:O.z.number(),y:O.z.number(),dim:O.z.number().default(0),bright:O.z.number().default(0),tintColor:O.z.string().default('#ffffff'),tintAlpha:O.z.number().min(0).max(1).default(.5),animation:O.z.object({type:O.z.string().optional(),speed:O.z.number().optional(),intensity:O.z.number().optional()}).optional()}),I=O.z.object({c:O.z.tuple([O.z.number(),O.z.number(),O.z.number(),O.z.number()]),move:O.z.union([O.z.literal(0),O.z.literal(1)]).default(1),sense:O.z.union([O.z.literal(0),O.z.literal(1)]).default(1),sound:O.z.union([O.z.literal(0),O.z.literal(1)]).default(1),door:O.z.union([O.z.literal(0),O.z.literal(1),O.z.literal(2)]).default(0),ds:O.z.union([O.z.literal(0),O.z.literal(1)]).optional()}),N=O.z.object({id:O.z.string(),name:O.z.string().default('未命名'),x:O.z.number(),y:O.z.number(),width:O.z.number().default(1),height:O.z.number().default(1),img:O.z.string().optional(),vision:O.z.number().default(0),dimVision:O.z.number().default(0),rotation:O.z.number().default(0),hidden:O.z.boolean().default(!1),elevation:O.z.number().default(0)}),R=O.z.object({name:O.z.string().default('未命名地图'),width:O.z.number().positive(),height:O.z.number().positive(),grid:O.z.number().positive().default(100),shiftX:O.z.number().default(0),shiftY:O.z.number().default(0),gridDistance:O.z.number().positive().default(5),gridUnits:O.z.string().default('ft'),padding:O.z.number().default(0),gridColor:O.z.string().default('#000000'),gridAlpha:O.z.number().min(0).max(1).default(.2),globalLight:O.z.boolean().default(!0),darkness:O.z.number().min(0).max(1).default(0),backgroundColor:O.z.string().default('#000000'),img:O.z.string().nullable().optional(),foreground:O.z.string().nullable().optional(),lights:O.z.array(L).default([]),walls:O.z.array(I).default([]),tokens:O.z.array(N).default([]),fogOfWar:O.z.object({enabled:O.z.boolean().default(!1),explored:O.z.array(O.z.array(O.z.boolean())).optional()}).default({enabled:!1})}),Y=O.z.object({mapId:O.z.string(),tokens:O.z.array(N),fogExplored:O.z.array(O.z.array(O.z.boolean())).optional(),viewport:O.z.object({x:O.z.number().default(0),y:O.z.number().default(0),scale:O.z.number().default(1)}).default({})});const B={class:'vtt-viewer'},X={key:0,class:'loading'},F={key:1,class:'error'},W={class:'toolbar'},J={class:'toolbar-actions'},P={class:'map-wrapper'},H={key:0,class:'side-panel token-manager'},G={class:'panel-header'},q={class:'panel-content'},K={class:'token-header'},Q=['onClick'],Z={class:'token-details'},ee=['onUpdate:modelValue'],ae=['onUpdate:modelValue'],te=['onUpdate:modelValue'],ne=['onUpdate:modelValue'],le=['onUpdate:modelValue'],oe={key:1,class:'side-panel map-info'},ie={class:'panel-header'},se={class:'panel-content'},re={class:'info-item'},ue={class:'info-item'},de={class:'info-item'},ce={class:'info-item'},pe={class:'info-item'},ve={class:'info-item'},fe={class:'info-item'},me=r({__name:'App',setup(t){const r=p(!0),d=p(null),b=p(null),k=p(!1),y=p(!1),x=p(null),w=a(()=>x.value?x.value.state.value.tokens:b.value?.tokens||[]);async function C(){r.value=!0,d.value=null;try{const e=getVariables({type:'script',script_id:getScriptId()});if(!e.vtt_map_url&&!e.vtt_map_data)throw new Error('未配置地图数据。请在脚本变量中设置 vtt_map_url 或 vtt_map_data');let a;if(e.vtt_map_url){const t=await fetch(e.vtt_map_url);a=await t.json()}else a=e.vtt_map_data;const t=R.parse(a);b.value=t,x.value=function(e){const a=a=>{try{const t=`vtt_map_${e}`,n=T.cloneDeep(a);replaceVariables({[t]:n},{type:'chat'})}catch(e){console.error('保存地图状态失败:',e)}},t=p((()=>{try{const a=getVariables({type:'chat'}),t=`vtt_map_${e}`;if(a[t])return Y.parse(a[t])}catch(e){console.warn('加载地图状态失败:',e)}return{mapId:e,tokens:[],viewport:{x:0,y:0,scale:1}}})()),n=T.debounce(e=>{a(e)},1e3);return h(t,e=>{n(e)},{deep:!0}),{state:t,updateTokenPosition:(e,a,n)=>{const l=t.value.tokens.find(a=>a.id===e);l&&(l.x=a,l.y=n)},addToken:e=>{t.value.tokens.find(a=>a.id===e.id)||t.value.tokens.push(e)},removeToken:e=>{const a=t.value.tokens.findIndex(a=>a.id===e);-1!==a&&t.value.tokens.splice(a,1)},updateViewport:(e,a,n)=>{t.value.viewport={x:e,y:a,scale:n}},markExplored:(e,a)=>{t.value.fogExplored||(t.value.fogExplored=[]),t.value.fogExplored[a]||(t.value.fogExplored[a]=[]),t.value.fogExplored[a][e]=!0},isExplored:(e,a)=>t.value.fogExplored?.[a]?.[e]??!1,saveState:()=>a(t.value)}}(t.name),0===x.value.state.value.tokens.length&&t.tokens.length>0&&t.tokens.forEach(e=>{x.value?.addToken(e)}),toastr.success(`地图 "${t.name}" 加载成功`)}catch(e){d.value=e instanceof Error?e.message:String(e),toastr.error('地图加载失败: '+d.value)}finally{r.value=!1}}function D(e,a,t){x.value?.updateTokenPosition(e.id,a,t)}function M(e){console.log('选中 Token:',e)}function V(){if(!x.value||!b.value)return;const e=N.parse({id:`token_${Date.now()}`,name:`Token ${w.value.length+1}`,x:b.value.width/2,y:b.value.height/2,width:1,height:1,vision:12});x.value.addToken(e),toastr.success(`添加了新的 Token: ${e.name}`)}function j(){if(!x.value)return;const e=x.value.state.value,a=JSON.stringify(e,null,2);navigator.clipboard.writeText(a).then(()=>{toastr.success('状态已复制到剪贴板')}).catch(()=>{const e=new Blob([a],{type:'application/json'}),t=URL.createObjectURL(e),n=document.createElement('a');n.href=t,n.download=`${b.value?.name}_state.json`,n.click(),URL.revokeObjectURL(t)})}function S(){const e=prompt('请粘贴地图状态 JSON:');if(e)try{const a=JSON.parse(e);replaceVariables({[`vtt_map_${b.value?.name}`]:a},{type:'chat'}),toastr.success('状态导入成功,正在重新加载...'),setTimeout(()=>location.reload(),1e3)}catch(e){toastr.error('导入失败: '+(e instanceof Error?e.message:String(e)))}}return u(()=>{C()}),(a,t)=>(c(),l('div',B,[r.value?(c(),l('div',X,[...t[4]||(t[4]=[o('div',{class:'spinner'},null,-1),o('p',null,'加载地图中...',-1)])])):d.value?(c(),l('div',F,[t[5]||(t[5]=o('h2',null,'❌ 加载失败',-1)),o('pre',null,f(d.value),1),o('button',{onClick:C},'重试')])):b.value?(c(),l(e,{key:2},[n(' 顶部工具栏 '),o('div',W,[o('h2',null,f(b.value.name),1),o('div',J,[o('button',{onClick:t[0]||(t[0]=e=>k.value=!k.value)},'🎭 Token 管理'),o('button',{onClick:t[1]||(t[1]=e=>y.value=!y.value)},'ℹ️ 地图信息'),o('button',{onClick:j},'💾 导出状态'),o('button',{onClick:S},'📁 导入状态')])]),n(' 地图画布 '),o('div',P,[s(A,{'map-data':b.value,tokens:w.value,onTokenMove:D,onTokenSelect:M},null,8,['map-data','tokens'])]),n(' Token 管理面板 '),k.value?(c(),l('div',H,[o('div',G,[t[6]||(t[6]=o('h3',null,'Token 管理',-1)),o('button',{onClick:t[2]||(t[2]=e=>k.value=!1)},'✖')]),o('div',q,[o('button',{onClick:V,class:'add-token-btn'},'➕ 添加 Token'),(c(!0),l(e,null,v(w.value,e=>(c(),l('div',{key:e.id,class:'token-item'},[o('div',K,[o('strong',null,f(e.name),1),o('button',{onClick:a=>{return t=e.id,void(x.value&&confirm('确定要删除这个 Token 吗?')&&(x.value.removeToken(t),toastr.success('Token 已删除')));var t},class:'delete-btn'},'🗑️',8,Q)]),o('div',Z,[o('label',null,[t[7]||(t[7]=i(' 名称: ',-1)),g(o('input',{'onUpdate:modelValue':a=>e.name=a,type:'text'},null,8,ee),[[m,e.name]])]),o('label',null,[t[8]||(t[8]=i(' X: ',-1)),g(o('input',{'onUpdate:modelValue':a=>e.x=a,type:'number',step:'10'},null,8,ae),[[m,e.x,void 0,{number:!0}]])]),o('label',null,[t[9]||(t[9]=i(' Y: ',-1)),g(o('input',{'onUpdate:modelValue':a=>e.y=a,type:'number',step:'10'},null,8,te),[[m,e.y,void 0,{number:!0}]])]),o('label',null,[t[10]||(t[10]=i(' 视野范围: ',-1)),g(o('input',{'onUpdate:modelValue':a=>e.vision=a,type:'number',min:'0',max:'100'},null,8,ne),[[m,e.vision,void 0,{number:!0}]])]),o('label',null,[t[11]||(t[11]=i(' 尺寸: ',-1)),g(o('input',{'onUpdate:modelValue':a=>e.width=a,type:'number',min:'1',max:'10'},null,8,le),[[m,e.width,void 0,{number:!0}]])])])]))),128))])])):n('v-if',!0),n(' 地图信息面板 '),y.value?(c(),l('div',oe,[o('div',ie,[t[12]||(t[12]=o('h3',null,'地图信息',-1)),o('button',{onClick:t[3]||(t[3]=e=>y.value=!1)},'✖')]),o('div',se,[o('div',re,[t[13]||(t[13]=o('label',null,'地图名称:',-1)),o('span',null,f(b.value.name),1)]),o('div',ue,[t[14]||(t[14]=o('label',null,'尺寸:',-1)),o('span',null,f(b.value.width)+' × '+f(b.value.height)+' px',1)]),o('div',de,[t[15]||(t[15]=o('label',null,'网格:',-1)),o('span',null,f(b.value.grid)+' px ('+f(b.value.gridDistance)+' '+f(b.value.gridUnits)+')',1)]),o('div',ce,[t[16]||(t[16]=o('label',null,'光源数量:',-1)),o('span',null,f(b.value.lights.length),1)]),o('div',pe,[t[17]||(t[17]=o('label',null,'墙壁数量:',-1)),o('span',null,f(b.value.walls.length),1)]),o('div',ve,[t[18]||(t[18]=o('label',null,'全局光照:',-1)),o('span',null,f(b.value.globalLight?'是':'否'),1)]),o('div',fe,[t[19]||(t[19]=o('label',null,'黑暗等级:',-1)),o('span',null,f((100*b.value.darkness).toFixed(0))+'%',1)])])])):n('v-if',!0)],64)):n('v-if',!0)]))}}),he=(0,U.A)(me,[['__scopeId','data-v-712ceb6a']]);$(()=>{t(he).mount('#app'),toastr.success('VTT 地图查看器已加载')}),$(window).on('pagehide',()=>{toastr.info('VTT 地图查看器已卸载')});</script><style>.map-canvas-container[data-v-6d3eac8c]{position:relative;width:100%;height:100%;overflow:hidden;background:#1a1a1a}canvas[data-v-6d3eac8c]{display:block;width:100%;height:100%}.map-controls[data-v-6d3eac8c]{position:absolute;top:10px;right:10px;display:flex;flex-direction:column;gap:5px;z-index:10}.map-controls button[data-v-6d3eac8c]{width:40px;height:40px;border:none;background:rgba(0,0,0,0.7);color:white;border-radius:5px;cursor:pointer;font-size:18px;transition:background 0.2s}.map-controls button[data-v-6d3eac8c]:hover{background:rgba(0,0,0,0.9)}.token-info[data-v-6d3eac8c]{position:absolute;bottom:10px;left:10px;background:rgba(0,0,0,0.8);color:white;padding:15px;border-radius:8px;min-width:200px;z-index:10}.token-info h3[data-v-6d3eac8c]{margin:0 0 10px 0;font-size:16px}.token-info p[data-v-6d3eac8c]{margin:5px 0;font-size:14px}.token-info button[data-v-6d3eac8c]{margin-top:10px;padding:5px 10px;background:#4caf50;border:none;color:white;border-radius:4px;cursor:pointer}.token-info button[data-v-6d3eac8c]:hover{background:#45a049}

.vtt-viewer[data-v-712ceb6a]{width:100%;height:100vh;display:flex;flex-direction:column;background:#1a1a1a;color:white;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}.loading[data-v-712ceb6a],.error[data-v-712ceb6a]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:20px}.spinner[data-v-712ceb6a]{width:50px;height:50px;border:4px solid rgba(255,255,255,0.3);border-top-color:white;border-radius:50%;animation:spin-712ceb6a 1s linear infinite}@keyframes spin-712ceb6a{to{transform:rotate(360deg)}}.error pre[data-v-712ceb6a]{background:rgba(255,0,0,0.2);padding:15px;border-radius:5px;max-width:600px}.error button[data-v-712ceb6a]{padding:10px 20px;background:#4caf50;border:none;color:white;border-radius:5px;cursor:pointer}.toolbar[data-v-712ceb6a]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background:rgba(0,0,0,0.8);border-bottom:2px solid #333}.toolbar h2[data-v-712ceb6a]{margin:0;font-size:20px}.toolbar-actions[data-v-712ceb6a]{display:flex;gap:10px}.toolbar-actions button[data-v-712ceb6a]{padding:8px 15px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.3);color:white;border-radius:5px;cursor:pointer;transition:background 0.2s}.toolbar-actions button[data-v-712ceb6a]:hover{background:rgba(255,255,255,0.2)}.map-wrapper[data-v-712ceb6a]{flex:1;position:relative}.side-panel[data-v-712ceb6a]{position:absolute;top:60px;right:10px;width:300px;max-height:calc(100vh - 80px);background:rgba(0,0,0,0.9);border:1px solid #333;border-radius:8px;overflow:hidden;display:flex;flex-direction:column;z-index:100}.panel-header[data-v-712ceb6a]{display:flex;justify-content:space-between;align-items:center;padding:15px;background:rgba(255,255,255,0.1);border-bottom:1px solid #333}.panel-header h3[data-v-712ceb6a]{margin:0;font-size:16px}.panel-header button[data-v-712ceb6a]{background:none;border:none;color:white;font-size:18px;cursor:pointer}.panel-content[data-v-712ceb6a]{flex:1;overflow-y:auto;padding:15px}.add-token-btn[data-v-712ceb6a]{width:100%;padding:10px;background:#4caf50;border:none;color:white;border-radius:5px;cursor:pointer;margin-bottom:15px}.token-item[data-v-712ceb6a]{background:rgba(255,255,255,0.05);padding:10px;border-radius:5px;margin-bottom:10px}.token-header[data-v-712ceb6a]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.delete-btn[data-v-712ceb6a]{background:rgba(255,0,0,0.3);border:none;color:white;padding:4px 8px;border-radius:3px;cursor:pointer}.token-details[data-v-712ceb6a]{display:flex;flex-direction:column;gap:8px}.token-details label[data-v-712ceb6a]{display:flex;justify-content:space-between;align-items:center;font-size:14px}.token-details input[data-v-712ceb6a]{width:120px;padding:4px 8px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.3);color:white;border-radius:3px}.info-item[data-v-712ceb6a]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.1)}.info-item label[data-v-712ceb6a]{font-weight:bold}

</style></head><body><div id="app"></div></body></html>